(window.webpackJsonpclickerbattle=window.webpackJsonpclickerbattle||[]).push([[0],{151:function(e,t,a){e.exports=a(310)},283:function(e,t){},310:function(e,t,a){"use strict";a.r(t);a(152),a(178),a(180),a(181),a(183),a(184),a(185),a(186),a(187),a(188),a(189),a(190),a(192),a(193),a(194),a(195),a(196),a(197),a(198),a(199),a(200),a(201),a(203),a(204),a(205),a(206),a(207),a(208),a(209),a(210),a(211),a(212),a(213),a(214),a(215),a(216),a(217),a(218),a(219),a(220);var n=a(0),o=a.n(n),c=a(82),i=a.n(c),s=a(32),r=a.n(s),l=a(83),u=a.n(l),d=a(133),m=a(60),p=a(41),h=a.n(p),b=a(57),f=a.n(b),v=(a(229),a(134)),y=a(135),E=a(149),g=a(136),k=a(37),S=a(150),j=a(59),O=a.n(j),C=a(50),w=a.n(C),B=a(84),P=a.n(B),_=a(144),x=a.n(_),A=a(147),I=a.n(A),K=a(148),T=a.n(K),V=a(85),W=a.n(V),M=a(145),U=a.n(M),D=a(146),z=a.n(D),G=a(58),J=a.n(G),N=a(137),F=a.n(N),q=(a(248),a(251),a(113),a(138)),H=a.n(q),L=(a(253),a(254),a(139)),Q=a.n(L),R=a(140),X=a.n(R),Y=a(141),Z=a.n(Y),$=a(142),ee=a.n($),te=a(143),ae=a.n(te),ne={backgroundColor:"var(--dynamic_red)"},oe=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(g.a)(t).call(this,e))).state={activePanel:"main",popout:null,snackbar:null,user_id:0,bots:[],activeStory:"feed"},a.openBase=a.openBase.bind(Object(k.a)(a)),a.login=a.login.bind(Object(k.a)(a)),a.getBots=a.getBots.bind(Object(k.a)(a)),a.componentDidMount=a.componentDidMount.bind(Object(k.a)(a)),a.onStoryChange=a.onStoryChange.bind(Object(k.a)(a)),r.a.send("VKWebAppInit",{}),a}return Object(S.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({popout:o.a.createElement(f.a,null)}),setTimeout((function(){e.login()}),100)}},{key:"login",value:function(){var e=this;r.a.sendPromise("VKWebAppGetUserInfo",{}).then((function(t){e.setState({user_id:t.id}),e.getBots()})).catch((function(t){console.log(t),e.setState({popout:null})}));var t=ae.a.connect("https://193.124.188.159:8080",{secure:!0});t.on("connect",(function(){t.json.send({method:"params",params:window.location.search.replace("?","")}),t.on("message",(function(e){console.log(e)}))}))}},{key:"getBots",value:function(){F()({method:"get",url:"https://bots-vk-api.herokuapp.com/api",params:{method:"getBots",user_id:this.state.user_id},headers:{"Content-Type":"application/json"},responseType:"json"}).then(function(e){var t=e.data.error;console.log(e.data),t?this.openBase(e.data.error_msg,o.a.createElement(H.a,{fill:"#fff",width:14,height:14}),ne):this.setState({bots:e.data.bots}),this.setState({popout:null})}.bind(this))}},{key:"openBase",value:function(e,t,a){var n=this;this.setState({snackbar:null}),this.setState({snackbar:o.a.createElement(x.a,{layout:"vertical",onClose:function(){return n.setState({snackbar:null})},before:o.a.createElement(P.a,{size:24,style:a},t)},e)})}},{key:"onStoryChange",value:function(e){this.setState({activeStory:e.currentTarget.dataset.story})}},{key:"render",value:function(){return o.a.createElement(U.a,{popout:this.state.popout,activeStory:this.state.activeStory,tabbar:o.a.createElement(z.a,null,o.a.createElement(J.a,{onClick:this.onStoryChange,selected:"feed"===this.state.activeStory,"data-story":"feed",text:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438"},o.a.createElement(Z.a,null)),o.a.createElement(J.a,{onClick:this.onStoryChange,selected:"notifications"===this.state.activeStory,"data-story":"notifications",text:"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d."},o.a.createElement(ee.a,null)),o.a.createElement(J.a,{onClick:this.onStoryChange,selected:"more"===this.state.activeStory,"data-story":"more",text:"\u0415\u0449\u0451"},o.a.createElement(X.a,null)))},o.a.createElement(h.a,{id:"feed",activePanel:"feed"},o.a.createElement(O.a,{id:"feed"},o.a.createElement(w.a,null,"Feed"),o.a.createElement(I.a,{title:"\u0411\u043e\u0442\u044b"},o.a.createElement(T.a,null,o.a.createElement(W.a,{before:o.a.createElement(Q.a,null),component:"a",href:"https://vk.com/im?media=&sel=-189298925"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0431\u043e\u0442\u0430"),this.bots)),this.state.snackbar)),o.a.createElement(h.a,{id:"notifications",activePanel:"notifications"},o.a.createElement(O.a,{id:"notifications"},o.a.createElement(w.a,null,"Notifications"))),o.a.createElement(h.a,{id:"more",activePanel:"more"},o.a.createElement(O.a,{id:"more"},o.a.createElement(w.a,null,"More"))))}},{key:"bots",get:function(){return null===this.state.bots||0===Object.keys(this.state.bots).length?void 0:this.state.bots.map((function(e,t){return o.a.createElement(W.a,{before:o.a.createElement(P.a,{src:e.photo})},e.title)}))}}]),t}(o.a.Component),ce=function(){var e=Object(n.useState)("home"),t=Object(m.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(null),s=Object(m.a)(i,2),l=s[0],p=s[1],b=Object(n.useState)(o.a.createElement(f.a,{size:"large"})),v=Object(m.a)(b,2),y=v[0],E=v[1];Object(n.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.sendPromise("VKWebAppGetUserInfo");case 2:t=e.sent,p(t),E(null);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r.a.subscribe((function(e){var t=e.detail,a=t.type,n=t.data;if("VKWebAppUpdateConfig"===a){var o=document.createAttribute("scheme");o.value=n.scheme?n.scheme:"client_light",document.body.attributes.setNamedItem(o)}})),function(){e.apply(this,arguments)}()}),[]);return o.a.createElement(h.a,{activePanel:a,popout:y},o.a.createElement(oe,{id:"home",fetchedUser:l,go:function(e){c(e.currentTarget.dataset.to)}}))};r.a.send("VKWebAppInit"),i.a.render(o.a.createElement(ce,null),document.getElementById("root"))}},[[151,1,2]]]);
//# sourceMappingURL=main.36e7ae95.chunk.js.map